<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Toolbar</title>

    <link rel="stylesheet" href="src/font-awesome.min.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="src/jquery.toolbar.css"/>
    <link rel="stylesheet" href="src/jquery-ui.css"/>

    <script src="src/jquery.min.js"></script>
    <script src="src/jquery.toolbar.js"></script>
    <script src="src/jquery-ui.js"></script>
    <script src="src/jqColorPicker.min.js" type="text/javascript"></script>
</head>
<body>

<!-- Two appearing buttons when the main button is clicked -->
<div id="toolbar-options" class="hidden">
    <a href="#" onclick="createButton()"><i class="fa fa-pencil-square-o" ></i></a>
    <a href="#" onclick="createText()"><i class="fa fa-file-text-o"></i></a>
</div>
<!-- The main button  -->
<section>
    <div  data-toolbar="position-option" class="btn-toolbar " id="main"><i class="fa fa-cog"></i></div>
</section>
<!-- Places for the created elements -->
<div id="container" style="padding: 50px">
    <div id="left"></div>
    <div id="right"></div>
</div>

<style>

    #container{width: 100%;}
    #left{float: left; width: 30%;}
    #right{float: right; width: 30%;}

</style>

<script>
    $('#main').toolbar({
        content: '#toolbar-options',
        position: 'bottom',
        event: "click",
    });
// Draggable elements
    var intervalID = setInterval(function() {
        $( "#main" ).draggable();
        $( ".leftDiv" ).draggable();
        $( ".rightDiv" ).draggable();
        $(".cp-color-picker").draggable();
    }, 100);

    var buttonId = 0, textId = 0
            , left = document.getElementById('left'),
              right = document.getElementById('right');

    function createButton() {
        var d = document.createElement("div");
        d.className = "leftDiv";
        d.style.width = "200px";
        d.style.height = "50px";
        d.style.background = "red";
        d.style.border = "2px solid black";
        d.style.margin = "2px";
        d.onclick = function(){
            $(document).on('dblclick', '.leftDiv', function() {
                $('.leftDiv').colorPicker();
            });
        };
        d.id = "button" + buttonId;
        d.innerHTML = "Button #" + buttonId ;
        left.appendChild(d);
        buttonId += 1;
    }
    function createText() {
        var d2 = document.createElement("div");
        d2.className = "rightDiv";
        d2.style.background = "blue";
        d2.style.width = "200px";
        d2.style.height = "40px";
        d2.innerHTML = "Text";
        d2.style.border = "2px solid black";
        d2.style.margin = "2px";
        d2.onclick = function(){
            $(document).on('dblclick', '.rightDiv', function() {
                $('.rightDiv').colorPicker();
            });
        };
        d2.id = "text" + textId;
        d2.innerHTML = "Text #" + textId ;
        textId += 1;
        right.appendChild(d2);
    }

</script>

</body>
</html>